{% extends "frame.html" %}
{% load static %}

{% block content %}
    {% if request.user.is_authenticated %}
        {% if request.user.fitnessouser.is_trainer %}
            <button onclick="location.href='/user_verwaltung'">Zurück</button>
        {% endif %}

        <link rel="stylesheet" href="{% static "css/goals.css" %}">

        <div class = "content">
            <div id = "create-goals">
                <h1>Ziele</h1>
                <input id="home-hauptziel" type="text" placeholder="Hauptziel">
                <button onclick="hauptziel_erstellen()">Hauptziel erstellen</button>
                 <div id="hauptziel-create-error" style="display:none">Ziel ungültig</div>
            </div>
        </div>
        <div class = "row">
            {% for ziel in ziele %}
            <div class = "main-goal">

                <div class = "goal-header">{{ ziel.ziel }} ({{ ziel.status }})
                    <button onclick="hauptziel_delete({{ ziel.id }})">delete hauptziel</button>
                </div>
                <div class ="minor-goal">
                    {% for unterziel in ziel.unterziele %}

                    {% if unterziel.status %}
                        {{ unterziel.ziel }}
                    {% else %}
                        {{ unterziel.ziel }}
                        <button onclick="unterziel_abschliessen({{ unterziel.id }})">done</button>
                    {% endif %}
                    <button onclick="unterziel_delete({{ unterziel.id }})">delete</button><br>
                {% endfor %}
                <input id="home-unterziel-{{ ziel.id }}" type="text">
                <button onclick="unterziel_erstellen({{ ziel.id }})">+</button>
                <div id="unterziel-create-error-{{ ziel.id }}" style="display:none">Ziel ungültig</div>
                </div>
            </div>

            {% endfor %}
        </div>
    {% endif %}
{% endblock %}


{% block scripts %}
    <script src="{% static "js/ziele.js" %}?v=1"></script>
{% endblock %}