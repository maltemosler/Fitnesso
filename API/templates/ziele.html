{% extends "frame.html" %}
{% load static %}

{% block content %}
    {% if request.user.is_authenticated %}
        {% if request.user.fitnessouser.is_trainer %}
        {% endif %}

        <link rel="stylesheet" href="{% static "css/goals.css" %}">

        <div class = "content">
            <div id = "create-goals">
                <div id ="header"> Ziele </div>
                <input id="home-hauptziel" type="text" placeholder="Hauptziel">
                <button onclick="hauptziel_erstellen()">Hauptziel erstellen</button>
            </div>
        </div>
        <div class = "row">
            {% for ziel in ziele %}
            <div class = "main-goal">
                <div class = "goal-header">
                    <div class = "title"> {{ ziel.ziel }} </div>
                    <button id="delete-goal-btn" onclick="hauptziel_delete({{ ziel.id }})">delete hauptziel</button>
                </div>
                <div class="progress" data-label="50% Complete">
                    <span class="value" style="width:50%;"></span>
                </div>
                <div class ="minor-goal">
                    {% for unterziel in ziel.unterziele %}

                    {% if unterziel.status %}
                        {{ unterziel.ziel }}
                    {% else %}
                        {{ unterziel.ziel }}
                        <button onclick="unterziel_abschliessen({{ unterziel.id }})">done</button>
                    {% endif %}
                    <button onclick="unterziel_delete({{ unterziel.id }})">delete</button><br>
                {% endfor %}
                <input id="home-unterziel-{{ ziel.id }}" type="text">
                <button onclick="unterziel_erstellen({{ ziel.id }})">+</button>
                </div>
            </div>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}


{% block scripts %}
    <script src="{% static "js/ziele.js" %}?v=1"></script>
{% endblock %}